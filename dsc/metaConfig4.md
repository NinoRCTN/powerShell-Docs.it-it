---
ms.date: 2017-10-12
author: eslesar;mgreenegit
ms.topic: conceptual
keywords: dsc,powershell,configurazione,impostazione
title: Gestione configurazione locale di Windows PowerShell 4.0 DSC (Desired State Configuration)
ms.openlocfilehash: d46862f9ea0f8e3206c596af7232160fc4a97939
ms.sourcegitcommit: 9a5da3f739b1eebb81ede58bd4fc8037bad87224
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/16/2017
---
# <a name="windows-powershell-40-desired-state-configuration-local-configuration-manager-lcm"></a><span data-ttu-id="0bec7-103">Gestione configurazione locale di Windows PowerShell 4.0 DSC (Desired State Configuration)</span><span class="sxs-lookup"><span data-stu-id="0bec7-103">Windows PowerShell 4.0 Desired State Configuration Local Configuration Manager (LCM)</span></span>

><span data-ttu-id="0bec7-104">Si applica a: Windows PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="0bec7-104">Applies To: Windows PowerShell 4.0</span></span>

<span data-ttu-id="0bec7-105">Gestione configurazione locale è il motore di Windows PowerShell DSC (Desired State Configuration).</span><span class="sxs-lookup"><span data-stu-id="0bec7-105">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span>
<span data-ttu-id="0bec7-106">Viene eseguito in tutti i nodi di destinazione e ha la responsabilità di chiamare le risorse di configurazione incluse in uno script di configurazione DSC.</span><span class="sxs-lookup"><span data-stu-id="0bec7-106">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span>
<span data-ttu-id="0bec7-107">Questo argomento contiene l'elenco delle proprietà di Gestione configurazione locale e descrive in che modo modificare le impostazioni di Gestione configurazione locale in un nodo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-107">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="0bec7-108">Proprietà di Gestione configurazione locale</span><span class="sxs-lookup"><span data-stu-id="0bec7-108">Local Configuration Manager properties</span></span>

<span data-ttu-id="0bec7-109">Di seguito sono elencate le proprietà di Gestione configurazione locale che è possibile impostare o recuperare.</span><span class="sxs-lookup"><span data-stu-id="0bec7-109">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>

- <span data-ttu-id="0bec7-110">**AllowModuleOverwrite**: controlla se le nuove configurazioni scaricate dal servizio di configurazione possono sovrascrivere quelle meno recenti nel nodo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-110">**AllowModuleOverwrite**: Controls whether new configurations downloaded from the configuration service are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="0bec7-111">I possibili valori sono True e False.</span><span class="sxs-lookup"><span data-stu-id="0bec7-111">Possible values are True and False.</span></span>
- <span data-ttu-id="0bec7-112">**CertificateID**: l'identificazione personale di un certificato usato per proteggere le credenziali passate in una configurazione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-112">**CertificateID**: The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="0bec7-113">Per altre informazioni, vedere [Protezione delle credenziali in Windows PowerShell DSC (Desired State Configuration)](http://blogs.msdn.com/b/powershell/archive/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="0bec7-113">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](http://blogs.msdn.com/b/powershell/archive/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration.aspx).</span></span>
- <span data-ttu-id="0bec7-114">**ConfigurationID**: indica un GUID usato per ottenere un file di configurazione specifico da un servizio di pull.</span><span class="sxs-lookup"><span data-stu-id="0bec7-114">**ConfigurationID**: Indicates a GUID which is used to get a particular configuration file from a pull service.</span></span> <span data-ttu-id="0bec7-115">Il GUID garantisce l'accesso al file di configurazione corretto.</span><span class="sxs-lookup"><span data-stu-id="0bec7-115">The GUID ensures that the correct configuration file is accessed.</span></span>
- <span data-ttu-id="0bec7-116">**ConfigurationMode**: specifica il modo in cui Gestione configurazione locale applica effettivamente la configurazione ai nodi di destinazione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-116">**ConfigurationMode**: Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="0bec7-117">Può accettare i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="0bec7-117">It can take the following values:</span></span>
  - <span data-ttu-id="0bec7-118">**ApplyOnly**: con questa opzione, DSC applica la configurazione e non esegue altre operazioni, a meno che non venga rilevata una nuova configurazione quando si invia una nuova configurazione direttamente al nodo di destinazione o se ci si connette a un servizio di pull e DSC individua una nuova configurazione quando controlla nel servizio di pull.</span><span class="sxs-lookup"><span data-stu-id="0bec7-118">**ApplyOnly**: With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node or if you are connecting to a pull service and DSC discovers a new configuration when it checks with the pull service.</span></span> <span data-ttu-id="0bec7-119">Se la configurazione del nodo di destinazione non è sincronizzata, non viene eseguita alcuna azione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-119">If the target node’s configuration drifts, no action is taken.</span></span>
  - <span data-ttu-id="0bec7-120">**ApplyAndMonitor**: con questa opzione (che è quella predefinita), DSC applica tutte le nuove configurazioni, sia quelle inviate direttamente al nodo di destinazione sia quelle individuate in un servizio di pull.</span><span class="sxs-lookup"><span data-stu-id="0bec7-120">**ApplyAndMonitor**: With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="0bec7-121">Quindi, se la configurazione del nodo di destinazione non è sincronizzata rispetto al file di configurazione, DSC segnala la discrepanza nei log.</span><span class="sxs-lookup"><span data-stu-id="0bec7-121">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="0bec7-122">Per altre informazioni sulla registrazione di DSC, vedere la pagina sull'[uso di registri eventi per la diagnosi di errori in DSC (Desired State Configuration)](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="0bec7-122">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](http://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span></span>
  - <span data-ttu-id="0bec7-123">**ApplyAndAutoCorrect**: con questa opzione, DSC applica tutte le nuove configurazioni, sia quelle inviate direttamente al nodo di destinazione sia quelle individuate in un servizio di pull.</span><span class="sxs-lookup"><span data-stu-id="0bec7-123">**ApplyAndAutoCorrect**: With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="0bec7-124">Quindi, se la configurazione del nodo di destinazione non è sincronizzata rispetto al file di configurazione, DSC segnala la discrepanza nei log e quindi tenta di modificare la configurazione del nodo di destinazione per garantire la conformità con il file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-124">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
- <span data-ttu-id="0bec7-125">**ConfigurationModeFrequencyMins**: rappresenta la frequenza (in minuti) con la quale l'applicazione in background di DSC tenta di implementare la configurazione corrente nel nodo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-125">**ConfigurationModeFrequencyMins**: Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="0bec7-126">Il valore predefinito è 15.</span><span class="sxs-lookup"><span data-stu-id="0bec7-126">The default value is 15.</span></span> <span data-ttu-id="0bec7-127">Questo valore può essere impostato insieme a RefreshMode.</span><span class="sxs-lookup"><span data-stu-id="0bec7-127">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="0bec7-128">Quando la proprietà RefreshMode è impostata su PULL, il nodo di destinazione contatta il servizio di configurazione in base a un intervallo impostato tramite RefreshFrequencyMins e scarica la configurazione corrente.</span><span class="sxs-lookup"><span data-stu-id="0bec7-128">When RefreshMode is set to PULL, the target node contacts the configuration service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="0bec7-129">Indipendentemente dal valore di RefreshMode, il motore di coerenza applica la configurazione più recente scaricata al nodo di destinazione in base all'intervallo impostato tramite ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="0bec7-129">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="0bec7-130">La proprietà RefreshFrequencyMins deve essere impostata su un numero intero multiplo di ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="0bec7-130">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
- <span data-ttu-id="0bec7-131">**Credential**: indica le credenziali (come con Get-Credential) necessarie per accedere alle risorse remote, ad esempio per contattare il servizio di configurazione.</span><span class="sxs-lookup"><span data-stu-id="0bec7-131">**Credential**: Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration service.</span></span>
- <span data-ttu-id="0bec7-132">**DownloadManagerCustomData**: rappresenta una matrice che contiene dati personalizzati specifici del gestore di download.</span><span class="sxs-lookup"><span data-stu-id="0bec7-132">**DownloadManagerCustomData**: Represents an array that contains custom data specific to the download manager.</span></span>
- <span data-ttu-id="0bec7-133">**DownloadManagerName**: indica il nome del gestore di download di configurazioni e moduli.</span><span class="sxs-lookup"><span data-stu-id="0bec7-133">**DownloadManagerName**: Indicates the name of the configuration and module download manager.</span></span>
- <span data-ttu-id="0bec7-134">**RebootNodeIfNeeded**: alcune modifiche di configurazione in un nodo di destinazione possono richiedere il riavvio del nodo prima di avere effetto.</span><span class="sxs-lookup"><span data-stu-id="0bec7-134">**RebootNodeIfNeeded**: Certain configuration changes on a target node might require it to be restarted for the changes to be applied.</span></span> <span data-ttu-id="0bec7-135">Con il valore **True**, questa proprietà riavvia il nodo non appena la configurazione viene applicata completamente, senza altri avvisi.</span><span class="sxs-lookup"><span data-stu-id="0bec7-135">With the value **True**, this property will restart the node as soon as the configuration has been completely applies, without further warning.</span></span> <span data-ttu-id="0bec7-136">Se **False** (valore predefinito), la configurazione viene completata, ma il nodo deve essere riavviato manualmente perché le modifiche abbiano effetto.</span><span class="sxs-lookup"><span data-stu-id="0bec7-136">If **False** (the default value), the configuration will be completed, but the node must be restarted manually for the changes to take effect.</span></span>
- <span data-ttu-id="0bec7-137">**RefreshFrequencyMins**: proprietà usata quando è stato configurato un servizio di pull.</span><span class="sxs-lookup"><span data-stu-id="0bec7-137">**RefreshFrequencyMins**: Used when you have set up a pull service.</span></span> <span data-ttu-id="0bec7-138">Rappresenta la frequenza (in minuti) in base alla quale Gestione configurazione locale contatta un servizio di pull per scaricare la configurazione corrente.</span><span class="sxs-lookup"><span data-stu-id="0bec7-138">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a pull service to download the current configuration.</span></span> <span data-ttu-id="0bec7-139">Questo valore può essere impostato insieme a ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="0bec7-139">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="0bec7-140">Quando la proprietà RefreshMode è impostata su PULL, il nodo di destinazione contatta il servizio di pull in base a un intervallo impostato tramite RefreshFrequencyMins e scarica la configurazione corrente.</span><span class="sxs-lookup"><span data-stu-id="0bec7-140">When RefreshMode is set to PULL, the target node contacts the pull service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="0bec7-141">Il motore di coerenza applica la configurazione più recente scaricata al nodo di destinazione in base all'intervallo impostato tramite ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="0bec7-141">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="0bec7-142">Se la proprietà RefreshFrequencyMins non è impostata su un numero intero multiplo di ConfigurationModeFrequencyMins, il sistema arrotonda questo valore.</span><span class="sxs-lookup"><span data-stu-id="0bec7-142">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="0bec7-143">Il valore predefinito è 30.</span><span class="sxs-lookup"><span data-stu-id="0bec7-143">The default value is 30.</span></span>
- <span data-ttu-id="0bec7-144">**RefreshMode**: i possibili valori sono **Push** (predefinito) e **Pull**.</span><span class="sxs-lookup"><span data-stu-id="0bec7-144">**RefreshMode**: Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="0bec7-145">Nella configurazione "push" è necessario inserire un file di configurazione in ogni nodo di destinazione, usando qualsiasi computer client.</span><span class="sxs-lookup"><span data-stu-id="0bec7-145">In the “push” configuration, you must place a configuration file on each target node, using any client computer.</span></span> <span data-ttu-id="0bec7-146">In modalità "pull" è necessario configurare un servizio di pull perché Gestione configurazione locale possa contattare i file di configurazione e accedervi.</span><span class="sxs-lookup"><span data-stu-id="0bec7-146">In the “pull” mode, you must set up a pull service for Local Configuration Manager to contact and access the configuration files.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="0bec7-147">Esempio di aggiornamento delle impostazioni di Gestione configurazione locale</span><span class="sxs-lookup"><span data-stu-id="0bec7-147">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="0bec7-148">È possibile aggiornare le impostazioni di Gestione configurazione locale di un nodo di destinazione inserendo in uno script di configurazione un blocco **LocalConfigurationManager** all'interno del blocco del nodo, come mostrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="0bec7-148">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node “Server001”
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullService/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"
```

<span data-ttu-id="0bec7-149">L'esecuzione dello script dell'esempio precedente genera un file MOF che specifica e archivia le impostazioni desiderate.</span><span class="sxs-lookup"><span data-stu-id="0bec7-149">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span>
<span data-ttu-id="0bec7-150">Per applicare le impostazioni, è possibile usare il cmdlet **Set-DscLocalConfigurationManager**, come mostrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="0bec7-150">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> <span data-ttu-id="0bec7-151">**Nota**: per il parametro **Path**, è necessario specificare lo stesso percorso specificato per il parametro **OutputPath** quando è stata richiamata la configurazione nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="0bec7-151">**Note**: For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="0bec7-152">Per visualizzare le impostazioni di Gestione configurazione locale correnti, è possibile usare il cmdlet **Get-DscLocalConfigurationManager**.</span><span class="sxs-lookup"><span data-stu-id="0bec7-152">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span>
<span data-ttu-id="0bec7-153">Se richiamato senza parametri, per impostazione predefinita questo cmdlet ottiene le impostazioni di Gestione configurazione locale per il nodo in cui viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="0bec7-153">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span>
<span data-ttu-id="0bec7-154">Per specificare un altro nodo, usare il parametro **CimSession** con questo cmdlet.</span><span class="sxs-lookup"><span data-stu-id="0bec7-154">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>
